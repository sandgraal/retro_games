<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Sandgraal's Game List</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <script
      src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"
      defer
    ></script>
  </head>
  <body>
    <h1>Sandgraal's Game List</h1>
    <div class="top-actions">
      <button id="exportBtn">Export Owned Games</button>
      <button id="shareBtn">Get Shareable Link</button>
      <button id="showImport">Import Collection Code</button>
      <button id="backupBtn">Backup Collection JSON</button>
      <button id="restoreBtn">Restore Backup</button>
      <input
        type="file"
        id="restoreInput"
        accept="application/json"
        style="display: none"
      />
    </div>
    <div class="filters">
      <label class="filter-field">
        <span>Platform</span>
        <select id="platformFilter">
          <option value="">All Platforms</option>
        </select>
      </label>
      <label class="filter-field">
        <span>Genre</span>
        <select id="genreFilter">
          <option value="">All Genres</option>
        </select>
      </label>
      <label class="filter-field search-field">
        <span>Search</span>
        <input id="search" placeholder="Type to filter..." />
      </label>
      <label class="filter-field">
        <span>Status</span>
        <select id="statusFilter">
          <option value="">All Statuses</option>
          <option value="owned">Owned</option>
          <option value="wishlist">Wishlist</option>
          <option value="backlog">Backlog</option>
          <option value="trade">Trade</option>
        </select>
      </label>
      <label class="filter-field">
        <span>Min Rating</span>
        <input
          id="ratingFilter"
          type="number"
          inputmode="decimal"
          min="0"
          max="10"
          step="0.1"
          placeholder="0-10"
        />
      </label>
      <label class="filter-field">
        <span>Year From</span>
        <input
          id="yearStartFilter"
          type="number"
          inputmode="numeric"
          placeholder="1985"
        />
      </label>
      <label class="filter-field">
        <span>Year To</span>
        <input id="yearEndFilter" type="number" inputmode="numeric" placeholder="2005" />
      </label>
      <button id="clearFilters" class="filter-field clear-button">Clear Filters</button>
    </div>
    <div id="stats">Loading stats...</div>
    <section id="dashboard" aria-label="Collection dashboard">
      <div class="dashboard-card" id="dashboard-statuses">
        <h2>Status Mix</h2>
        <ul>
          <li><span>Owned</span><strong id="dash-owned">0</strong></li>
          <li><span>Wishlist</span><strong id="dash-wishlist">0</strong></li>
          <li><span>Backlog</span><strong id="dash-backlog">0</strong></li>
          <li><span>Trade</span><strong id="dash-trade">0</strong></li>
        </ul>
      </div>
      <div class="dashboard-card" id="dashboard-top-genres">
        <h2>Top Genres</h2>
        <ol id="dash-genres">
          <li>Loading...</li>
        </ol>
      </div>
      <div class="dashboard-card" id="dashboard-release">
        <h2>Release Timeline</h2>
        <div id="dash-timeline" class="timeline-bars">Loading...</div>
      </div>
    </section>
    <div id="shareSection" style="display: none">
      <button id="closeShare" title="Close">&times;</button>
      <div>
        <label for="shareCode">Share Code:</label>
        <input id="shareCode" readonly />
        <button id="copyShare">Copy</button>
      </div>
      <div>
        <label for="importCode">Import Code:</label>
        <input id="importCode" placeholder="Paste code here..." />
        <button id="importBtn">View</button>
        <span id="importResult"></span>
      </div>
    </div>
    <div id="result">Loading...</div>
    <table id="romTable" style="display: none">
      <thead></thead>
      <tbody></tbody>
    </table>
    <div id="modalBg"></div>
    <div id="gameModal"></div>
    <script src="config.js" defer></script>
    <script src="app.js" defer></script>
  </body>
</html>
