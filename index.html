<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Dragon's Hoard Atlas - Retro Game Collection Tracker</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta
      name="description"
      content="Track your retro game collection with Dragon's Hoard Atlas. Manage owned games, wishlists, and backlogs for classic consoles including NES, SNES, Genesis, PS1, and more."
    />
    <meta
      name="keywords"
      content="retro games, game collection, video game tracker, NES, SNES, Genesis, PS1, retro gaming, game database, collection management"
    />
    <meta name="author" content="Dragon's Hoard Atlas" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://sandgraal.github.io/retro_games/" />

    <!-- Theme color for mobile browsers -->
    <meta name="theme-color" content="#00d4ff" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="Dragon's Hoard Atlas - Retro Game Collection Tracker"
    />
    <meta
      property="og:description"
      content="Track your retro game collection with Dragon's Hoard Atlas. Manage owned games, wishlists, and backlogs for classic consoles."
    />
    <meta property="og:image" content="/favicon.png" />
    <meta property="og:url" content="https://sandgraal.github.io/retro_games/" />
    <meta property="og:site_name" content="Dragon's Hoard Atlas" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta
      name="twitter:title"
      content="Dragon's Hoard Atlas - Retro Game Collection Tracker"
    />
    <meta
      name="twitter:description"
      content="Track your retro game collection with Dragon's Hoard Atlas. Manage owned games, wishlists, and backlogs for classic consoles."
    />
    <meta name="twitter:image" content="/favicon.png" />

    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />

    <!-- New Design System Styles -->
    <link rel="stylesheet" href="style.css" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png" />

    <!-- Preload critical resources -->
    <!-- Vite will handle module preloading in production -->

    <!-- Supabase -->
    <script
      src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"
      defer
    ></script>
  </head>
  <body>
    <!-- Skip Link for Accessibility -->
    <a class="skip-link" href="#mainContent">Skip to main content</a>

    <!-- App Shell -->
    <div class="app-shell">
      <!-- Sticky Header -->
      <header class="app-header" role="banner">
        <div class="header-content">
          <div class="app-logo">
            <span class="app-logo-icon" aria-hidden="true">üéÆ</span>
            <span>Dragon's Hoard Atlas</span>
          </div>

          <div class="header-search">
            <span class="header-search-icon" aria-hidden="true">üîç</span>
            <input
              type="search"
              id="headerSearch"
              class="header-search-input"
              placeholder="Search games..."
              aria-label="Search games"
              autocomplete="off"
            />
          </div>

          <div class="header-actions">
            <button
              type="button"
              class="header-action-btn"
              id="exportBtn"
              aria-label="Export collection"
              title="Export Owned Games"
            >
              <span aria-hidden="true">üì§</span>
            </button>
            <button
              type="button"
              class="header-action-btn"
              id="shareBtn"
              aria-label="Share collection"
              title="Get Shareable Link"
            >
              <span aria-hidden="true">üîó</span>
            </button>
            <button
              type="button"
              class="header-action-btn"
              id="settingsBtn"
              aria-label="Settings"
              title="Settings"
            >
              <span aria-hidden="true">‚öôÔ∏è</span>
            </button>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main id="mainContent" class="app-main" tabindex="-1">
        <!-- Hero Dashboard - Stats First -->
        <section class="hero-dashboard" aria-label="Collection dashboard">
          <div class="dashboard-hero-content">
            <h2 class="dashboard-title">Your Hoard Ledger at a Glance</h2>
            <p class="dashboard-subtitle"></p>
            <div class="dashboard-grid" id="dashboardGrid">
              <!-- Owned Games Card -->
              <div class="stat-card">
                <div class="stat-card-header">
                  <span class="stat-card-icon" aria-hidden="true">üéÆ</span>
                </div>
                <div class="stat-card-label">Owned Games</div>
                <div class="stat-card-value accent-primary" id="ownedCount">0</div>
                <div class="stat-card-subtitle" id="ownedPlatformBreakdown">
                  Loading...
                </div>
                <div class="stat-progress">
                  <div class="stat-progress-bar">
                    <div
                      class="stat-progress-fill"
                      style="width: 0%"
                      id="ownedProgressBar"
                    ></div>
                  </div>
                </div>
              </div>

              <!-- Collection Value Card -->
              <div class="stat-card">
                <div class="stat-card-header">
                  <span class="stat-card-icon" aria-hidden="true">üí∞</span>
                </div>
                <div class="stat-card-label">Collection Value</div>
                <div class="stat-card-value accent-warm" id="collectionValue">$0</div>
                <div class="stat-card-trend" id="valueTrend">
                  <span aria-hidden="true">‚Üó</span>
                  <span>Calculating...</span>
                </div>
              </div>

              <!-- Recent Additions Card -->
              <div class="stat-card">
                <div class="stat-card-header">
                  <span class="stat-card-icon" aria-hidden="true">‚ú®</span>
                </div>
                <div class="stat-card-label">Recent Additions</div>
                <div class="stat-card-value" id="recentCount">5</div>
                <div class="stat-card-carousel" id="recentGamesCarousel">
                  <!-- Populated by JS -->
                </div>
              </div>

              <!-- Wishlist Card -->
              <div class="stat-card">
                <div class="stat-card-header">
                  <span class="stat-card-icon" aria-hidden="true">‚≠ê</span>
                </div>
                <div class="stat-card-label">Wishlist</div>
                <div class="stat-card-value" id="wishlistCount">0</div>
                <div class="stat-card-subtitle" id="wishlistValue">Est. $0</div>
              </div>

              <!-- Backlog Card -->
              <div class="stat-card">
                <div class="stat-card-header">
                  <span class="stat-card-icon" aria-hidden="true">üìö</span>
                </div>
                <div class="stat-card-label">Backlog</div>
                <div class="stat-card-value" id="backlogCount">0</div>
                <div class="stat-card-subtitle" id="backlogHours">~0 hours</div>
              </div>

              <!-- Quick Actions Card -->
              <div class="stat-card">
                <div class="stat-card-header">
                  <span class="stat-card-icon" aria-hidden="true">‚ö°</span>
                </div>
                <div class="stat-card-label">Quick Actions</div>
                <div class="stat-card-carousel">
                  <button type="button" class="game-card-action" id="importBtn">
                    Import
                  </button>
                  <button type="button" class="game-card-action" id="backupBtn">
                    Backup
                  </button>
                  <button type="button" class="game-card-action" id="contributeBtn">
                    Submit Media
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Collection Grid with Filters -->
        <section class="collection-container" aria-label="Game collection">
          <!-- Filters Sidebar -->
          <aside class="filters-sidebar" id="filtersSidebar" role="complementary">
            <div class="filters-header">
              <h3 class="filters-title">Filters</h3>
              <button type="button" class="filters-clear" id="clearFilters" disabled>
                Clear All
              </button>
            </div>

            <!-- Search Filter -->
            <div class="filter-search">
              <span class="filter-search-icon" aria-hidden="true">üîç</span>
              <input
                type="search"
                id="filterSearch"
                class="filter-search-input"
                placeholder="Search..."
                aria-label="Filter by search"
              />
            </div>

            <!-- Platform Filter -->
            <div class="filter-group">
              <div class="filter-group-label">
                <span>Platform</span>
                <span class="filter-count" id="platformCount">0</span>
              </div>
              <div class="filter-options" id="platformFilters">
                <!-- Populated by JS -->
              </div>
            </div>

            <!-- Genre Filter -->
            <div class="filter-group">
              <div class="filter-group-label">
                <span>Genre</span>
                <span class="filter-count" id="genreCount">0</span>
              </div>
              <div class="filter-options" id="genreFilters">
                <!-- Populated by JS -->
              </div>
            </div>

            <!-- Region Filter -->
            <div class="filter-group">
              <div class="filter-group-label">
                <span>Region</span>
                <span class="filter-count" id="regionCount">0</span>
              </div>
              <div class="filter-options" id="regionFilters">
                <label class="filter-option">
                  <input type="checkbox" value="NTSC" data-filter="region" />
                  <span class="filter-option-label">NTSC</span>
                  <span class="filter-option-count" data-region="NTSC">0</span>
                </label>
                <label class="filter-option">
                  <input type="checkbox" value="PAL" data-filter="region" />
                  <span class="filter-option-label">PAL</span>
                  <span class="filter-option-count" data-region="PAL">0</span>
                </label>
                <label class="filter-option">
                  <input type="checkbox" value="JPN" data-filter="region" />
                  <span class="filter-option-label">JPN</span>
                  <span class="filter-option-count" data-region="JPN">0</span>
                </label>
              </div>
            </div>

            <!-- Status Filter -->
            <div class="filter-group">
              <div class="filter-group-label">
                <span>Status</span>
                <span class="filter-count" id="statusCount">0</span>
              </div>
              <div class="filter-options" id="statusFilters">
                <label class="filter-option">
                  <input type="checkbox" value="owned" />
                  <span class="filter-option-label">Owned</span>
                  <span class="filter-option-count" data-status="owned">0</span>
                </label>
                <label class="filter-option">
                  <input type="checkbox" value="wishlist" />
                  <span class="filter-option-label">Wishlist</span>
                  <span class="filter-option-count" data-status="wishlist">0</span>
                </label>
                <label class="filter-option">
                  <input type="checkbox" value="backlog" />
                  <span class="filter-option-label">Backlog</span>
                  <span class="filter-option-count" data-status="backlog">0</span>
                </label>
                <label class="filter-option">
                  <input type="checkbox" value="trade" />
                  <span class="filter-option-label">For Trade</span>
                  <span class="filter-option-count" data-status="trade">0</span>
                </label>
              </div>
            </div>

            <!-- Year Range Filter -->
            <div class="filter-group">
              <div class="filter-group-label">
                <span>Release Year</span>
              </div>
              <div class="filter-range" id="yearRange">
                <input
                  type="number"
                  id="yearStart"
                  class="filter-range-input"
                  placeholder="From"
                  min="1970"
                  max="2025"
                  aria-label="Year from"
                />
                <span class="filter-range-separator">‚Äì</span>
                <input
                  type="number"
                  id="yearEnd"
                  class="filter-range-input"
                  placeholder="To"
                  min="1970"
                  max="2025"
                  aria-label="Year to"
                />
              </div>
            </div>

            <!-- Minimum Rating Filter -->
            <div class="filter-group">
              <div class="filter-group-label">
                <span>Minimum Rating</span>
              </div>
              <div class="filter-slider" id="ratingFilter">
                <input
                  type="range"
                  id="ratingMin"
                  class="filter-range-slider"
                  min="0"
                  max="10"
                  step="0.5"
                  value="0"
                  aria-label="Minimum rating"
                />
                <span class="filter-range-value" id="ratingMinValue">0</span>
              </div>
            </div>

            <!-- Sort Options -->
            <div class="filter-group">
              <div class="filter-group-label">
                <span>Sort By</span>
              </div>
              <div class="filter-sort" id="sortOptions">
                <button type="button" class="sort-option active" data-sort="name">
                  Name (A-Z)
                </button>
                <button type="button" class="sort-option" data-sort="rating">
                  Rating (High to Low)
                </button>
                <button type="button" class="sort-option" data-sort="year">
                  Year (Newest First)
                </button>
                <button type="button" class="sort-option" data-sort="value">
                  Value (High to Low)
                </button>
              </div>
            </div>
          </aside>

          <!-- Game Grid -->
          <div class="game-grid" id="gameGrid" role="list">
            <!-- Populated by JS -->
            <div class="loading">
              <div class="loading-spinner"></div>
            </div>
          </div>
        </section>
      </main>

      <!-- Mobile Navigation -->
      <nav class="mobile-nav" aria-label="Mobile navigation">
        <button type="button" class="mobile-nav-item active" data-nav="collection">
          <span class="mobile-nav-icon" aria-hidden="true">üéÆ</span>
          <span>Collection</span>
        </button>
        <button type="button" class="mobile-nav-item" data-nav="stats">
          <span class="mobile-nav-icon" aria-hidden="true">üìä</span>
          <span>Stats</span>
        </button>
        <button type="button" class="mobile-nav-item filters-toggle" id="filtersToggle">
          <span class="mobile-nav-icon" aria-hidden="true">üîß</span>
          <span>Filters</span>
        </button>
        <button type="button" class="mobile-nav-item" data-nav="more">
          <span class="mobile-nav-icon" aria-hidden="true">‚ãØ</span>
          <span>More</span>
        </button>
      </nav>

      <!-- Filters Backdrop (Mobile) -->
      <div class="filters-backdrop" id="filtersBackdrop"></div>
    </div>

    <!-- Game Detail Modal -->
    <div
      class="modal-backdrop"
      id="gameModalBackdrop"
      role="dialog"
      aria-modal="true"
      aria-labelledby="gameModalTitle"
      aria-hidden="true"
      hidden
    >
      <div class="modal" id="gameModal">
        <header class="modal-header">
          <h2 class="modal-title" id="gameModalTitle">Game Details</h2>
          <button
            type="button"
            class="modal-close"
            id="gameModalClose"
            aria-label="Close modal"
          >
            <span aria-hidden="true">√ó</span>
          </button>
        </header>
        <div class="modal-content">
          <div class="modal-cover" id="gameModalCover">
            <div class="modal-cover-image">
              <img src="" alt="" id="gameModalCoverImage" />
            </div>
            <div class="modal-cover-actions" id="gameModalActions">
              <!-- Status buttons populated by JS -->
            </div>
          </div>
          <div class="modal-details" id="gameModalDetails">
            <!-- Game details populated by JS -->
          </div>
        </div>
      </div>
    </div>

    <!-- SEO: Noscript fallback for crawlers -->
    <noscript>
      <div style="padding: 2rem; text-align: center; background: #14181f; color: #fff">
        <h1>Dragon's Hoard Atlas</h1>
        <p>
          Track your retro game collection for classic consoles including NES, SNES,
          Genesis, PlayStation, and more.
        </p>
        <h2>Features</h2>
        <ul style="list-style: none; padding: 0">
          <li>üìä Collection Dashboard - Track owned games, wishlists, and backlogs</li>
          <li>üîç Advanced Search - Filter by platform, genre, rating, and region</li>
          <li>üí∞ Price Tracking - Monitor collection value with PriceCharting data</li>
          <li>üì§ Export & Share - CSV export and shareable collection codes</li>
          <li>üéÆ Thousands of Games - Comprehensive retro game database</li>
        </ul>
        <p>Enable JavaScript to use the full application.</p>
      </div>
    </noscript>

    <!-- Load Config (external, not bundled) -->
    <script type="module">
      // Dynamic config loading
      try {
        const script = document.createElement("script");
        script.src = "config.js";
        document.head.appendChild(script);
      } catch (e) {
        console.warn("Config not found, using sample data");
      }
    </script>

    <!-- Load App (Vite handles this in dev, builds to dist in prod) -->
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
